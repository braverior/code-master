apiVersion: v1
kind: ConfigMap
metadata:
  name: codemaster-config
  namespace: default
data:
  config.yaml: |
    server:
      port: 30003
      mode: debug

    database:
      host: 127.0.0.1             # K8s Service name for MySQL
      port: 3306
      user: root
      password: your-db-password  # Override via Secret → env → config
      dbname: code_master
      charset: utf8mb4

    redis:
      addr: 127.0.0.1:6379     # K8s Service name for Redis
      password: ""
      db: 0

    feishu:
      app_id: your-feishu-app-id
      app_secret: your-feishu-app-secret
      redirect_uri: http://localhost:30004/api/v1/auth/feishu/callback
      bot:
        enabled: true
        encrypt_key: ""
        verification_token: ""

    ai_chat:
      base_url: https://bmc-llm-relay.bluemediagroup.cn/v1
      api_key: your-ai-chat-api-key
      model: gpt-5.2
      max_history: 20

    jwt:
      secret: "change-me-to-a-random-string"
      expire_hours: 72

    codegen:
      max_workers: 3
      max_turns: 50
      timeout_minutes: 10
      work_dir: "/data/work"
      use_local_git: false

    encrypt:
      aes_key: "your-aes-encryption-key"
